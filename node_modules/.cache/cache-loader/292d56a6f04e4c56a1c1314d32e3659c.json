{"remainingRequest":"/Users/zhen/Documents/01-工作文件/Support Team/技术文档/kuihua-ebook/node_modules/babel-loader/lib/index.js??ref--7-1!/Users/zhen/Documents/01-工作文件/Support Team/技术文档/kuihua-ebook/node_modules/@docusaurus/mdx-loader/src/index.js??ref--7-2!/Users/zhen/Documents/01-工作文件/Support Team/技术文档/kuihua-ebook/node_modules/@docusaurus/plugin-content-docs/lib/markdown/index.js??ref--7-3!/Users/zhen/Documents/01-工作文件/Support Team/技术文档/kuihua-ebook/docs/solution/kubernetes/Kubernetess ingress-nginx实现金丝雀发布.md","dependencies":[{"path":"/Users/zhen/Documents/01-工作文件/Support Team/技术文档/kuihua-ebook/docs/solution/kubernetes/Kubernetess ingress-nginx实现金丝雀发布.md","mtime":1627035649799},{"path":"/Users/zhen/Documents/01-工作文件/Support Team/技术文档/kuihua-ebook/.docusaurus/docusaurus-plugin-content-docs/site-docs-solution-kubernetes-kubernetess-ingress-nginx实现金丝雀发布-md-bd1.json","mtime":1627035909158},{"path":"/Users/zhen/Documents/01-工作文件/Support Team/技术文档/kuihua-ebook/node_modules/cache-loader/dist/cjs.js","mtime":1627035812113},{"path":"/Users/zhen/Documents/01-工作文件/Support Team/技术文档/kuihua-ebook/node_modules/babel-loader/lib/index.js","mtime":1627035812104},{"path":"/Users/zhen/Documents/01-工作文件/Support Team/技术文档/kuihua-ebook/node_modules/@docusaurus/mdx-loader/src/index.js","mtime":1627035823637},{"path":"/Users/zhen/Documents/01-工作文件/Support Team/技术文档/kuihua-ebook/node_modules/@docusaurus/plugin-content-docs/lib/markdown/index.js","mtime":1627035823399}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9leHRlbmRzIGZyb20iL1VzZXJzL3poZW4vRG9jdW1lbnRzLzAxLVx1NURFNVx1NEY1Q1x1NjU4N1x1NEVGNi9TdXBwb3J0IFRlYW0vXHU2MjgwXHU2NzJGXHU2NTg3XHU2ODYzL2t1aWh1YS1lYm9vay9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kcyI7aW1wb3J0IFJlYWN0IGZyb20ncmVhY3QnO2ltcG9ydHttZHh9ZnJvbSdAbWR4LWpzL3JlYWN0JztleHBvcnQgY29uc3QgZnJvbnRNYXR0ZXI9e307ZXhwb3J0IGNvbnN0IG1ldGFkYXRhPXsiaWQiOiJzb2x1dGlvbi9rdWJlcm5ldGVzL0t1YmVybmV0ZXNzIGluZ3Jlc3Mtbmdpbnjlrp7njrDph5HkuJ3pm4Dlj5HluIMiLCJ0aXRsZSI6Ikt1YmVybmV0ZXNzIGluZ3Jlc3Mtbmdpbnjlrp7njrDph5HkuJ3pm4Dlj5HluIMiLCJkZXNjcmlwdGlvbiI6IiMgSzhzIDEuMTguNueJiOacrOWfuuS6jiBpbmdyZXNzLW5naW54IOWunueOsOmHkeS4nembgOWPkeW4g++8iOeBsOW6puWPkeW4g++8iSIsInNvdXJjZSI6IkBzaXRlL2RvY3Mvc29sdXRpb24va3ViZXJuZXRlcy9LdWJlcm5ldGVzcyBpbmdyZXNzLW5naW545a6e546w6YeR5Lid6ZuA5Y+R5biDLm1kIiwicGVybWFsaW5rIjoiL2RvY3Mvc29sdXRpb24va3ViZXJuZXRlcy9LdWJlcm5ldGVzcyBpbmdyZXNzLW5naW545a6e546w6YeR5Lid6ZuA5Y+R5biDIiwiZWRpdFVybCI6Imh0dHBzOi8vZ2l0aHViLmNvbS9jbnJhbmNoZXIvZG9jcy1yYW5jaGVyMi9lZGl0L21hc3Rlci9kb2NzL3NvbHV0aW9uL2t1YmVybmV0ZXMvS3ViZXJuZXRlc3MgaW5ncmVzcy1uZ2lueOWunueOsOmHkeS4nembgOWPkeW4gy5tZCIsImxhc3RVcGRhdGVkQnkiOiJBdXRob3IiLCJsYXN0VXBkYXRlZEF0IjoxNTM5NTAyMDU1LCJzaWRlYmFyIjoic29sdXRpb24iLCJwcmV2aW91cyI6eyJ0aXRsZSI6Im5naW54LWluZ3Jlc3Pln7rkuo5nUlBD5Y2P6K6u6YCa5L+hIiwicGVybWFsaW5rIjoiL2RvY3Mvc29sdXRpb24va3ViZXJuZXRlcy9uZ2lueC1pbmdyZXNz5Z+65LqOZ1JQQ+WNj+iurumAmuS/oSJ9LCJuZXh0Ijp7InRpdGxlIjoiUmFuY2hlci0yLjQuOC1lbnTku6XkuIrniYjmnKznm5Hmjqfkvb/nlKhOb2RlcG9ydOaatOmcsiIsInBlcm1hbGluayI6Ii9kb2NzL3NvbHV0aW9uL21vbml0b3JpbmcvUmFuY2hlci0yLjQuOC1lbnTku6XkuIrniYjmnKznm5Hmjqfkvb/nlKhOb2RlcG9ydOaatOmcsiJ9fTsvKiBAanN4IG1keCAqL2V4cG9ydCBjb25zdCByaWdodFRvYz1be3ZhbHVlOifnjq/looMnLGlkOifnjq/looMnLGNoaWxkcmVuOltdfSx7dmFsdWU6J+S7i+e7jScsaWQ6J+S7i+e7jScsY2hpbGRyZW46W119LHt2YWx1ZTon6aaW5YWI5Yib5bu65Lik5LiqbmdpbnjlupTnlKgnLGlkOifpppblhYjliJvlu7rkuKTkuKpuZ2lueOW6lOeUqCcsY2hpbGRyZW46W119LHt2YWx1ZTon6YOo572y5LiA5Liq5q2j5bi455qEaW5ncmVzcycsaWQ6J+mDqOe9suS4gOS4quato+W4uOeahGluZ3Jlc3MnLGNoaWxkcmVuOltdfSx7dmFsdWU6J+WfuuS6juadg+mHjei9rOWPkea1gemHjycsaWQ6J+WfuuS6juadg+mHjei9rOWPkea1gemHjycsY2hpbGRyZW46W119LHt2YWx1ZTon5Z+65LqO6K+35rGC5aS06L2s5Y+R5rWB6YePJyxpZDon5Z+65LqO6K+35rGC5aS06L2s5Y+R5rWB6YePJyxjaGlsZHJlbjpbXX0se3ZhbHVlOifln7rkuo7or7fmsYLlpLTlkozor7fmsYLlpLTnmoTlgLzovazlj5HmtYHph48nLGlkOifln7rkuo7or7fmsYLlpLTlkozor7fmsYLlpLTnmoTlgLzovazlj5HmtYHph48nLGNoaWxkcmVuOltdfSx7dmFsdWU6J+WfuuS6jmNvb2tpZei9rOWPkea1gemHjycsaWQ6J+WfuuS6jmNvb2tpZei9rOWPkea1gemHjycsY2hpbGRyZW46W119LHt2YWx1ZTon5oC757uTJyxpZDon5oC757uTJyxjaGlsZHJlbjpbXX1dO2NvbnN0IG1ha2VTaG9ydGNvZGU9bmFtZT0+ZnVuY3Rpb24gTURYRGVmYXVsdFNob3J0Y29kZShwcm9wcyl7Y29uc29sZS53YXJuKCJDb21wb25lbnQgIituYW1lKyIgd2FzIG5vdCBpbXBvcnRlZCwgZXhwb3J0ZWQsIG9yIHByb3ZpZGVkIGJ5IE1EWFByb3ZpZGVyIGFzIGdsb2JhbCBzY29wZSIpO3JldHVybiBtZHgoImRpdiIscHJvcHMpO307Y29uc3QgbGF5b3V0UHJvcHM9e3JpZ2h0VG9jfTtjb25zdCBNRFhMYXlvdXQ9IndyYXBwZXIiO2V4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1EWENvbnRlbnQoe2NvbXBvbmVudHMsLi4ucHJvcHN9KXtyZXR1cm4gbWR4KE1EWExheW91dCxfZXh0ZW5kcyh7fSxsYXlvdXRQcm9wcyxwcm9wcyx7Y29tcG9uZW50czpjb21wb25lbnRzLG1keFR5cGU6Ik1EWExheW91dCJ9KSxtZHgoImgxIix7ImlkIjoiazhzLTExODbniYjmnKzln7rkuo4taW5ncmVzcy1uZ2lueC3lrp7njrDph5HkuJ3pm4Dlj5HluIPvvIjngbDluqblj5HluIPvvIkifSxgSzhzIDEuMTguNueJiOacrOWfuuS6jiBpbmdyZXNzLW5naW54IOWunueOsOmHkeS4nembgOWPkeW4g++8iOeBsOW6puWPkeW4g++8iWApLG1keCgidGFibGUiLG51bGwsbWR4KCJ0aGVhZCIse3BhcmVudE5hbWU6InRhYmxlIn0sbWR4KCJ0ciIse3BhcmVudE5hbWU6InRoZWFkIn0sbWR4KCJ0aCIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InRyIn0seyJhbGlnbiI6bnVsbH0pLGDkvZzogIVgKSxtZHgoInRoIixfZXh0ZW5kcyh7cGFyZW50TmFtZToidHIifSx7ImFsaWduIjpudWxsfSksYOiwouazvemSpmApKSksbWR4KCJ0Ym9keSIse3BhcmVudE5hbWU6InRhYmxlIn0sbWR4KCJ0ciIse3BhcmVudE5hbWU6InRib2R5In0sbWR4KCJ0ZCIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InRyIn0seyJhbGlnbiI6bnVsbH0pLGDlm6LpmJ9gKSxtZHgoInRkIixfZXh0ZW5kcyh7cGFyZW50TmFtZToidHIifSx7ImFsaWduIjpudWxsfSksYEZpbGVkJiZTdXBwb29ydGApKSxtZHgoInRyIix7cGFyZW50TmFtZToidGJvZHkifSxtZHgoInRkIixfZXh0ZW5kcyh7cGFyZW50TmFtZToidHIifSx7ImFsaWduIjpudWxsfSksYOe8luWGmeaXtumXtGApLG1keCgidGQiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJ0ciJ9LHsiYWxpZ24iOm51bGx9KSxgMjAyMC8xMi8xMWApKSxtZHgoInRyIix7cGFyZW50TmFtZToidGJvZHkifSxtZHgoInRkIixfZXh0ZW5kcyh7cGFyZW50TmFtZToidHIifSx7ImFsaWduIjpudWxsfSksYOexu+Wei2ApLG1keCgidGQiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJ0ciJ9LHsiYWxpZ24iOm51bGx9KSxgaW5ncmVzc+ebuOWFs+ino+WGs+aWueahiGApKSkpLG1keCgiaHIiLG51bGwpLG1keCgiaDIiLHsiaWQiOiLnjq/looMifSxg546v5aKDYCksbWR4KCJ0YWJsZSIsbnVsbCxtZHgoInRoZWFkIix7cGFyZW50TmFtZToidGFibGUifSxtZHgoInRyIix7cGFyZW50TmFtZToidGhlYWQifSxtZHgoInRoIixfZXh0ZW5kcyh7cGFyZW50TmFtZToidHIifSx7ImFsaWduIjpudWxsfSksYOi9r+S7tmApLG1keCgidGgiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJ0ciJ9LHsiYWxpZ24iOm51bGx9KSxg54mI5pysYCkpKSxtZHgoInRib2R5Iix7cGFyZW50TmFtZToidGFibGUifSxtZHgoInRyIix7cGFyZW50TmFtZToidGJvZHkifSxtZHgoInRkIixfZXh0ZW5kcyh7cGFyZW50TmFtZToidHIifSx7ImFsaWduIjpudWxsfSksYGt1YmVybmV0ZXNgKSxtZHgoInRkIixfZXh0ZW5kcyh7cGFyZW50TmFtZToidHIifSx7ImFsaWduIjpudWxsfSksYHYxLjE4LjZgKSksbWR4KCJ0ciIse3BhcmVudE5hbWU6InRib2R5In0sbWR4KCJ0ZCIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InRyIn0seyJhbGlnbiI6bnVsbH0pLGBuZ2lueC1pbmdyZXNzLWNvbnRyb2xsZXJgKSxtZHgoInRkIixfZXh0ZW5kcyh7cGFyZW50TmFtZToidHIifSx7ImFsaWduIjpudWxsfSksYDAuMzIuMGApKSxtZHgoInRyIix7cGFyZW50TmFtZToidGJvZHkifSxtZHgoInRkIixfZXh0ZW5kcyh7cGFyZW50TmFtZToidHIifSx7ImFsaWduIjpudWxsfSksYFJhbmNoZXJgKSxtZHgoInRkIixfZXh0ZW5kcyh7cGFyZW50TmFtZToidHIifSx7ImFsaWduIjpudWxsfSksYHYyLjQuNWApKSkpLG1keCgicCIsbnVsbCxg5pys5qyh5a6e6aqM5Z+65LqOIFJhbmNoZXItdjIuNC41IOmDqOe9suS6hjEuMTguNueJiOacrOeahGs4c+mbhue+pO+8jG5naW54LWluZ3Jlc3Mg54mI5pys5Li6MC4zMi4w77yM55CG6K665LiKIGluZ3Jlc3MtbmdpbnggPj0gMC4yMS4w6YO95piv5Y+v5Lul55qE44CCYCksbWR4KCJwIixudWxsLGDku6XkuIvmiYDmnInnmoTlrp7pqozvvIzpg73lj6/ku6Xnm7TmjqXlnKhyYW5jaGVyIFVJ5LiK55u05o6l6YWN572u44CCYCksbWR4KCJoMiIseyJpZCI6IuS7i+e7jSJ9LGDku4vnu41gKSxtZHgoInAiLG51bGwsYOmHkeS4nembgOWPkeW4g++8muWPiOWPq+eBsOW6puWPkeW4g++8jOaOp+WItuS6p+WTgeS7jkHniYjmnKzlubPmu5HnmoTov4fluqbliLBC54mI5pysYCksbWR4KCJwIixudWxsLGBpbmdyZXNzLW5naW5477yaazhzIGluZ3Jlc3Plt6XlhbfvvIzmlK/mjIHph5HkuJ3pm4Dlj5HluIPvvIzlj6/ku6Xlrp7njrDln7rkuo7mnYPph43jgIHor7fmsYLlpLTjgIHor7fmsYLlpLTnmoTlgLzjgIFjb29raWXovazlj5HmtYHph4/jgIJgKSxtZHgoInAiLG51bGwsYHJhbmNoZXLvvJprOHPpm4bnvqTnrqHnkIblt6XlhbfvvIzkvb/nlKhVSeeugOWMlms4c+ebuOWFs+aTjeS9nGApLG1keCgicCIsbnVsbCxgaW5ncmVzcy1uZ2lueCBjYW5hcnnlrpjmlrnor7TmmI7vvJpgLG1keCgiYSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InAifSx7ImhyZWYiOiJodHRwczovL2dpdGh1Yi5jb20va3ViZXJuZXRlcy9pbmdyZXNzLW5naW54L2Jsb2IvbWFzdGVyL2RvY3MvdXNlci1ndWlkZS9uZ2lueC1jb25maWd1cmF0aW9uL2Fubm90YXRpb25zLm1kI2NhbmFyeSJ9KSxgaHR0cHM6Ly9naXRodWIuY29tL2t1YmVybmV0ZXMvaW5ncmVzcy1uZ2lueC9ibG9iL21hc3Rlci9kb2NzL3VzZXItZ3VpZGUvbmdpbngtY29uZmlndXJhdGlvbi9hbm5vdGF0aW9ucy5tZCNjYW5hcnlgKSksbWR4KCJoMiIseyJpZCI6IummluWFiOWIm+W7uuS4pOS4qm5naW545bqU55SoIn0sYOmmluWFiOWIm+W7uuS4pOS4qm5naW545bqU55SoYCksbWR4KCJvbCIsbnVsbCxtZHgoImxpIix7cGFyZW50TmFtZToib2wifSxg6YOo572y5Lik5LiqZGVwbG95bWVudOeahGh0dHDlupTnlKhgKSksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS15YW1sIn0pLGBhcGlWZXJzaW9uOiBhcHBzL3YxCmtpbmQ6IERlcGxveW1lbnQKbWV0YWRhdGE6CiAgbmFtZTogYXBwdjEKICBsYWJlbHM6CiAgICBhcHA6IHYxCnNwZWM6CiAgcmVwbGljYXM6IDEKICBzZWxlY3RvcjoKICAgIG1hdGNoTGFiZWxzOgogICAgICBhcHA6IHYxCiAgdGVtcGxhdGU6CiAgICBtZXRhZGF0YToKICAgICAgbGFiZWxzOgogICAgICAgIGFwcDogdjEKICAgIHNwZWM6CiAgICAgIGNvbnRhaW5lcnM6CiAgICAgIC0gbmFtZTogbmdpbngKICAgICAgICBpbWFnZTogemVyY2hpbi9jYW5hcnk6djEKICAgICAgICBwb3J0czoKICAgICAgICAtIGNvbnRhaW5lclBvcnQ6IDgwCi0tLQphcGlWZXJzaW9uOiBhcHBzL3YxCmtpbmQ6IERlcGxveW1lbnQKbWV0YWRhdGE6CiAgbmFtZTogYXBwdjIKICBsYWJlbHM6CiAgICBhcHA6IHYyCnNwZWM6CiAgcmVwbGljYXM6IDEKICBzZWxlY3RvcjoKICAgIG1hdGNoTGFiZWxzOgogICAgICBhcHA6IHYyCiAgdGVtcGxhdGU6CiAgICBtZXRhZGF0YToKICAgICAgbGFiZWxzOgogICAgICAgIGFwcDogdjIKICAgIHNwZWM6CiAgICAgIGNvbnRhaW5lcnM6CiAgICAgIC0gbmFtZTogbmdpbngKICAgICAgICBpbWFnZTogemVyY2hpbi9jYW5hcnk6djIKICAgICAgICBwb3J0czoKICAgICAgICAtIGNvbnRhaW5lclBvcnQ6IDgwCmApKSxtZHgoInAiLG51bGwsYGt1YmVjdGzmn6XnnItwb2RgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLXBvd2Vyc2hlbGwifSksYCMga3ViZWN0bCBnZXQgcG9kIC1vIHdpZGUgfGdyZXAgYXBwCmFwcHYxLTc3NjU1OTQ5ZjgtaHg2bm0gICAxLzEgICAgIFJ1bm5pbmcgICAwICAgICAgICAgIDQ0bSAgIDEwLjYwLjAuOTEgICB4aWUtbm9kZTAwMSAgIDxub25lPiAgICAgICAgICAgPG5vbmU+CmFwcHYyLTdiODY1OWNkODgtZGdkNWMgICAxLzEgICAgIFJ1bm5pbmcgICAwICAgICAgICAgIDQ0bSAgIDEwLjYwLjAuOTIgICB4aWUtbm9kZTAwMSAgIDxub25lPiAgICAgICAgICAgPG5vbmU+CmApKSxtZHgoInAiLG51bGwsYOi/meS4pOS4quW6lOeUqOi+k+WHuuS7peS4i+WGheWuuWApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtcG93ZXJzaGVsbCJ9KSxgIyBjdXJsIDEwLjYwLjAuOTEKdjEKIyBjdXJsIDEwLjYwLjAuOTIKY2FuYXJ5LXYyCmApKSxtZHgoIm9sIix7InN0YXJ0IjoyfSxtZHgoImxpIix7cGFyZW50TmFtZToib2wifSxg5YiG5Yir5Li65bqU55So5Yib5bu65a+55bqU55qEc2VydmljZWApKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLXlhbWwifSksYGFwaVZlcnNpb246IHYxCmtpbmQ6IFNlcnZpY2UKbWV0YWRhdGE6CiAgbmFtZTogYXBwdjEKc3BlYzoKICBzZWxlY3RvcjoKICAgIGFwcDogdjEKICBwb3J0czoKICAgIC0gcHJvdG9jb2w6IFRDUAogICAgICBwb3J0OiA4MAogICAgICB0YXJnZXRQb3J0OiA4MAotLS0KYXBpVmVyc2lvbjogdjEKa2luZDogU2VydmljZQptZXRhZGF0YToKICBuYW1lOiBhcHB2MgpzcGVjOgogIHNlbGVjdG9yOgogICAgYXBwOiB2MgogIHBvcnRzOgogICAgLSBwcm90b2NvbDogVENQCiAgICAgIHBvcnQ6IDgwCiAgICAgIHRhcmdldFBvcnQ6IDgwCmApKSxtZHgoInAiLG51bGwsYGt1YmVjdGzmn6XnnItzZXJ2aWNlYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0se30pLGAjIGt1YmVjdGwgZ2V0IHN2YyB8Z3JlcCBhcHAKYXBwdjEgICAgICAgICBDbHVzdGVySVAgICAxMC41MC40Mi4xNyAgICA8bm9uZT4gICAgICAgIDgwL1RDUCAgICAyNm0KYXBwdjIgICAgICAgICBDbHVzdGVySVAgICAxMC41MC40Mi4xMzEgICA8bm9uZT4gICAgICAgIDgwL1RDUCAgICAyNm0KYCkpLG1keCgiaDIiLHsiaWQiOiLpg6jnvbLkuIDkuKrmraPluLjnmoRpbmdyZXNzIn0sYOmDqOe9suS4gOS4quato+W4uOeahGluZ3Jlc3NgKSxtZHgoInAiLG51bGwsYOeOsOWcqOi/meS4qmluZ3Jlc3Pog73mraPluLjnmoTlsIborr/pl67ot6/nlLHliLBhcHB2MeS4imApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UteWFtbCJ9KSxgYXBpVmVyc2lvbjogZXh0ZW5zaW9ucy92MWJldGExCmtpbmQ6IEluZ3Jlc3MKbWV0YWRhdGE6CiAgbmFtZTogYXBwCiAgbmFtZXNwYWNlOiBkZWZhdWx0CnNwZWM6CiAgcnVsZXM6CiAgLSBob3N0OiBuZ2lueC56ZXJjaGluLnh5egogICAgaHR0cDoKICAgICAgcGF0aHM6CiAgICAgIC0gYmFja2VuZDoKICAgICAgICAgIHNlcnZpY2VOYW1lOiBhcHB2MQogICAgICAgICAgc2VydmljZVBvcnQ6IDgwCiAgICAgICAgcGF0aDogLwpgKSksbWR4KCJwIixudWxsLGBrdWJlY3Rs5p+l55yLaW5ncmVzc2ApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtcG93ZXJzaGVsbCJ9KSxgIyBrdWJlY3RsIGdldCBpbmdyZXNzCk5BTUUgICAgICAgICBDTEFTUyAgICBIT1NUUyAgICAgICAgICAgICAgIEFERFJFU1MgICAgICAgICAgICAgICAgICAgICBQT1JUUyAgIEFHRQphcHAgICAgICAgICAgPG5vbmU+ICAgbmdpbnguemVyY2hpbi54eXogICAxNzIuMTYuMC4xOTUsMTcyLjE2LjAuMTk2ICAgODAgICAgICAxMW0KYCkpLG1keCgicCIsbnVsbCxg6K6/6ZeubmdpbnguemVyY2hpbi54eXpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLWJhc2gifSksYCMgY3VybCBuZ2lueC56ZXJjaGluLnh5egp2MQpgKSksbWR4KCJoMiIseyJpZCI6IuWfuuS6juadg+mHjei9rOWPkea1gemHjyJ9LGDln7rkuo7mnYPph43ovazlj5HmtYHph49gKSxtZHgoInAiLG51bGwsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBuZ2lueC5pbmdyZXNzLmt1YmVybmV0ZXMuaW8vY2FuYXJ5LXdlaWdodGApLGDvvJrpmo/mnLrmlbTmlbDor7fmsYLnmoTmlbTmlbDnmb7liIbmr5TvvIgwLTEwMO+8ie+8jOW6lOWwhuWFtui3r+eUseWIsGNhbmFyeSBJbmdyZXNz5Lit5oyH5a6a55qE5pyN5Yqh44CC5p2D6YeNMOihqOekuuatpENhbmFyeeinhOWImeS4jeS8muWcqENhbmFyeeWFpeWPo+S4reWwhuS7u+S9leivt+axguWPkemAgeWIsOacjeWKoeOAguadg+mHjeS4ujEwMOihqOekuuaJgOacieivt+axgumDveWwhuWPkemAgeWIsEluZ3Jlc3PkuK3mjIflrprnmoTmm7/ku6PmnI3liqHjgIJgKSxtZHgoInAiLG51bGwsYOaWsOW7uuS4gOS4qmluZ3Jlc3PvvIzphY3nva7lpoLkuItgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLXlhbWwifSksYGFwaVZlcnNpb246IGV4dGVuc2lvbnMvdjFiZXRhMQpraW5kOiBJbmdyZXNzCm1ldGFkYXRhOgogIGFubm90YXRpb25zOgogICAga3ViZXJuZXRlcy5pby9pbmdyZXNzLmNsYXNzOiBuZ2lueAogICAgbmdpbnguaW5ncmVzcy5rdWJlcm5ldGVzLmlvL2NhbmFyeTogInRydWUiCiAgICBuZ2lueC5pbmdyZXNzLmt1YmVybmV0ZXMuaW8vY2FuYXJ5LXdlaWdodDogIjMwIgogIG5hbWU6IGFwcC1jYW5hcnkKICBuYW1lc3BhY2U6IGRlZmF1bHQKc3BlYzoKICBydWxlczoKICAtIGhvc3Q6IG5naW54LnplcmNoaW4ueHl6CiAgICBodHRwOgogICAgICBwYXRoczoKICAgICAgLSBiYWNrZW5kOgogICAgICAgICAgc2VydmljZU5hbWU6IGFwcHYyCiAgICAgICAgICBzZXJ2aWNlUG9ydDogODAKICAgICAgICBwYXRoOiAvCmApKSxtZHgoInAiLG51bGwsYGt1YmVjdGzmn6XnnItpbmdyZXNzYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1wb3dlcnNoZWxsIn0pLGAjIGt1YmVjdGwgZ2V0IGluZ3Jlc3MKTkFNRSAgICAgICAgIENMQVNTICAgIEhPU1RTICAgICAgICAgICAgICAgQUREUkVTUyAgICAgICAgICAgICAgICAgICAgIFBPUlRTICAgQUdFCmFwcCAgICAgICAgICA8bm9uZT4gICBuZ2lueC56ZXJjaGluLnh5eiAgIDE3Mi4xNi4wLjE5NSwxNzIuMTYuMC4xOTYgICA4MCAgICAgIDExbQphcHAtY2FuYXJ5ICAgPG5vbmU+ICAgbmdpbnguemVyY2hpbi54eXogICAxNzIuMTYuMC4xOTUsMTcyLjE2LjAuMTk2ICAgODAgICAgICA3bTEzcwpgKSksbWR4KCJwIixudWxsLGDov5nml7blgJnlho3orr/pl65uZ2lueC56ZXJjaGluLnh5eu+8jOS8muWPkeeOsOWFtuS4rTMwJeeahOa1gemHj+S8mui3r+eUseWIsHYy54mI5pys5LiKYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1iYXNoIn0pLGAjIGZvciBpIGluIFxgc2VxIDEgMTBcYDtkbyBjdXJsIG5naW54LnplcmNoaW4ueHl6O2RvbmUKY2FuYXJ5LXYyCmNhbmFyeS12Mgp2MQp2MQpjYW5hcnktdjIKdjEKdjEKdjEKdjEKdjEKYCkpLG1keCgiaDIiLHsiaWQiOiLln7rkuo7or7fmsYLlpLTovazlj5HmtYHph48ifSxg5Z+65LqO6K+35rGC5aS06L2s5Y+R5rWB6YePYCksbWR4KCJwIixudWxsLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgbmdpbnguaW5ncmVzcy5rdWJlcm5ldGVzLmlvL2NhbmFyeS1ieS1oZWFkZXJgKSxg77ya55So5LqO6YCa55+lSW5ncmVzc+Wwhuivt+axgui3r+eUseWIsENhbmFyeSBJbmdyZXNz5Lit5oyH5a6a55qE5pyN5Yqh55qE5qCH5aS044CC5b2T6K+35rGC5qCH5aS06K6+572uYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGFsd2F5c2ApLGDkuLrml7bvvIzlroPlsIbooqvot6/nlLHliLBDYW5hcnnjgILlvZPmoIflpLTorr7nva5gLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgbmV2ZXJgKSxg5Li65pe277yM5a6D5bCG5rC46L+c5LiN5Lya6Lev55Sx5Yiw6YeR5Lid6ZuA44CC5a+55LqO5Lu75L2V5YW25LuW5YC877yM5qCH5aS05bCG6KKr5b+955Wl77yM5bm25LiU5oyJ5LyY5YWI57qn5bCG6K+35rGC5LiO5YW25LuW6YeR5Lid6ZuA6KeE5YiZ6L+b6KGM5q+U6L6D44CCYCksbWR4KCJwIixudWxsLGDkv67mlLlhcHAtY2FuYXJ555qEaW5ncmVzc+mFjee9ru+8jOS/ruaUuWFubm90YXRpb27vvIzlpoLkuIvvvJpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLXlhbWwifSksYCAgYW5ub3RhdGlvbnM6CiAgICBrdWJlcm5ldGVzLmlvL2luZ3Jlc3MuY2xhc3M6IG5naW54CiAgICBuZ2lueC5pbmdyZXNzLmt1YmVybmV0ZXMuaW8vY2FuYXJ5OiAidHJ1ZSIKICAgIG5naW54LmluZ3Jlc3Mua3ViZXJuZXRlcy5pby9jYW5hcnktYnktaGVhZGVyOiAiY2FuYXJ5IgpgKSksbWR4KCJwIixudWxsLGDmtYvor5Xnu5PmnpxgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLXBvd2Vyc2hlbGwifSksYCMgY3VybCBuZ2lueC56ZXJjaGluLnh5eiAKdjEKIyBjdXJsIC1IICJjYW5hcnk6YWx3YXlzIiBuZ2lueC56ZXJjaGluLnh5eiAKY2FuYXJ5LXYyCmApKSxtZHgoImgyIix7ImlkIjoi5Z+65LqO6K+35rGC5aS05ZKM6K+35rGC5aS055qE5YC86L2s5Y+R5rWB6YePIn0sYOWfuuS6juivt+axguWktOWSjOivt+axguWktOeahOWAvOi9rOWPkea1gemHj2ApLG1keCgicCIsbnVsbCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYG5naW54LmluZ3Jlc3Mua3ViZXJuZXRlcy5pby9jYW5hcnktYnktaGVhZGVyLXZhbHVlYCksYO+8muWMuemFjeeahOaKpeWktOWAvO+8jOeUqOS6jumAmuefpUluZ3Jlc3PlsIbor7fmsYLot6/nlLHliLBDYW5hcnkgSW5ncmVzc+S4reaMh+WumueahOacjeWKoeOAguW9k+ivt+axguagh+WktOiuvue9ruS4uuatpOWAvOaXtu+8jOWug+Wwhuiiq+i3r+eUseWIsENhbmFyeeOAguWvueS6juS7u+S9leWFtuS7luagh+WktOWAvO+8jOagh+WktOWwhuiiq+W/veeVpe+8jOW5tuaMieS8mOWFiOe6p+Wwhuivt+axguS4juWFtuS7lumHkeS4nembgOinhOWImei/m+ihjOavlOi+g+OAguatpOazqOmHiuW/hemhu+S4jmAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBuZ2lueC5pbmdyZXNzLmt1YmVybmV0ZXMuaW8vY2FuYXJ5LWJ5LWhlYWRlcmApLGDkuIDotbfkvb/nlKjjgIJgKSxtZHgoInAiLG51bGwsYOS/ruaUuWFwcC1jYW5hcnnnmoRpbmdyZXNz6YWN572u77yM5L+u5pS5YW5ub3RhdGlvbu+8jOWmguS4i++8mmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UteWFtbCJ9KSxgICBhbm5vdGF0aW9uczoKICAgIGt1YmVybmV0ZXMuaW8vaW5ncmVzcy5jbGFzczogbmdpbngKICAgIG5naW54LmluZ3Jlc3Mua3ViZXJuZXRlcy5pby9jYW5hcnk6ICJ0cnVlIgogICAgbmdpbnguaW5ncmVzcy5rdWJlcm5ldGVzLmlvL2NhbmFyeS1ieS1oZWFkZXI6ICJjYW5hcnkiCiAgICBuZ2lueC5pbmdyZXNzLmt1YmVybmV0ZXMuaW8vY2FuYXJ5LWJ5LWhlYWRlci12YWx1ZTogImhhaGEiCmApKSxtZHgoInAiLG51bGwsYOa1i+ivlee7k+aenGApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtcG93ZXJzaGVsbCJ9KSxgIyBjdXJsIG5naW54LnplcmNoaW4ueHl6CnYxCiMgY3VybCAtSCAiY2FuYXJ5OmhhaGEiIG5naW54LnplcmNoaW4ueHl6CmNhbmFyeS12MgojIGN1cmwgLUggImNhbmFyeTphbHdheXMiIG5naW54LnplcmNoaW4ueHl6CnYxCmApKSxtZHgoImgyIix7ImlkIjoi5Z+65LqOY29va2ll6L2s5Y+R5rWB6YePIn0sYOWfuuS6jmNvb2tpZei9rOWPkea1gemHj2ApLG1keCgicCIsbnVsbCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYG5naW54LmluZ3Jlc3Mua3ViZXJuZXRlcy5pby9jYW5hcnktYnktY29va2llYCksYO+8mueUqOS6jumAmuefpUluZ3Jlc3PlsIbor7fmsYLot6/nlLHliLBDYW5hcnkgSW5ncmVzc+S4reaMh+WumueahOacjeWKoeeahGNvb2tpZeOAguW9k2Nvb2tpZeWAvOiuvue9rmAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBhbHdheXNgKSxg5Li65pe277yM5a6D5bCG6KKr6Lev55Sx5YiwY2FuYXJ544CC5b2TY29va2ll6K6+572uYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYG5ldmVyYCksYOS4uuaXtu+8jOWug+WwhuawuOi/nOS4jeS8mui3r+eUseWIsENhbmFyeeOAguWvueS6juS7u+S9leWFtuS7luWAvO+8jOWwhuW/veeVpWNvb2tpZe+8jOW5tuaMieS8mOWFiOe6p+Wwhuivt+axguS4juWFtuS7lmNhbmFyeeinhOWImei/m+ihjOavlOi+g+OAgmApLG1keCgicCIsbnVsbCxg5L+u5pS5YXBwLWNhbmFyeeeahGluZ3Jlc3PphY3nva7vvIzkv67mlLlhbm5vdGF0aW9u77yM5aaC5LiL77yaYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS15YW1sIn0pLGAgIGFubm90YXRpb25zOgogICAga3ViZXJuZXRlcy5pby9pbmdyZXNzLmNsYXNzOiBuZ2lueAogICAgbmdpbnguaW5ncmVzcy5rdWJlcm5ldGVzLmlvL2NhbmFyeTogInRydWUiCiAgICBuZ2lueC5pbmdyZXNzLmt1YmVybmV0ZXMuaW8vY2FuYXJ5LWJ5LWNvb2tpZTogInRlc3QiCmApKSxtZHgoInAiLG51bGwsYOa1i+ivlee7k+aenGApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtcG93ZXJzaGVsbCJ9KSxgIyBjdXJsIG5naW54LnplcmNoaW4ueHl6CnYxCiMgY3VybCAtYiAidGVzdD1uZXZlciIgbmdpbnguemVyY2hpbi54eXoKdjEKIyBjdXJsIC1iICJ0ZXN0PWFsd2F5cyIgbmdpbnguemVyY2hpbi54eXoKY2FuYXJ5LXYyCiMgY3VybCAtYiAidGVzdD0xIiBuZ2lueC56ZXJjaGluLnh5egp2MQpgKSksbWR4KCJoMiIseyJpZCI6IuaAu+e7kyJ9LGDmgLvnu5NgKSxtZHgoIm9sIixudWxsLG1keCgibGkiLHtwYXJlbnROYW1lOiJvbCJ9LG1keCgicCIse3BhcmVudE5hbWU6ImxpIn0sYOmHkeS4nembgOWPkeW4g+inhOWImeS8mOWFiOe6p++8mmAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBjYW5hcnktYnktaGVhZGVyYCksYCAtPiBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgY2FuYXJ5LWJ5LWNvb2tpZSBgKSxgLT4gYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGNhbmFyeS13ZWlnaHRgKSkpLG1keCgibGkiLHtwYXJlbnROYW1lOiJvbCJ9LG1keCgicCIse3BhcmVudE5hbWU6ImxpIn0sYOebruWJje+8jOavj+S4qmluZ3Jlc3Pop4TliJnmnIDlpJrlj6/ku6XlupTnlKjkuIDkuKpjYW5hcnkgaW5ncmVzc2ApKSkpO307TURYQ29udGVudC5pc01EWENvbXBvbmVudD10cnVlOw=="},{"version":3,"sources":["/Users/zhen/Documents/01-工作文件/Support Team/技术文档/kuihua-ebook/docs/solution/kubernetes/Kubernetess ingress-nginx实现金丝雀发布.md"],"names":["React","mdx","frontMatter","metadata","rightToc","value","id","children","makeShortcode","name","MDXDefaultShortcode","props","console","warn","layoutProps","MDXLayout","MDXContent","components","isMDXComponent"],"mappings":"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","sourcesContent":["\n  import React from 'react';\n  import { mdx } from '@mdx-js/react';\n\n  export const frontMatter = {};\nexport const metadata = {\n  \"id\": \"solution/kubernetes/Kubernetess ingress-nginx实现金丝雀发布\",\n  \"title\": \"Kubernetess ingress-nginx实现金丝雀发布\",\n  \"description\": \"# K8s 1.18.6版本基于 ingress-nginx 实现金丝雀发布（灰度发布）\",\n  \"source\": \"@site/docs/solution/kubernetes/Kubernetess ingress-nginx实现金丝雀发布.md\",\n  \"permalink\": \"/docs/solution/kubernetes/Kubernetess ingress-nginx实现金丝雀发布\",\n  \"editUrl\": \"https://github.com/cnrancher/docs-rancher2/edit/master/docs/solution/kubernetes/Kubernetess ingress-nginx实现金丝雀发布.md\",\n  \"lastUpdatedBy\": \"Author\",\n  \"lastUpdatedAt\": 1539502055,\n  \"sidebar\": \"solution\",\n  \"previous\": {\n    \"title\": \"nginx-ingress基于gRPC协议通信\",\n    \"permalink\": \"/docs/solution/kubernetes/nginx-ingress基于gRPC协议通信\"\n  },\n  \"next\": {\n    \"title\": \"Rancher-2.4.8-ent以上版本监控使用Nodeport暴露\",\n    \"permalink\": \"/docs/solution/monitoring/Rancher-2.4.8-ent以上版本监控使用Nodeport暴露\"\n  }\n};\n  /* @jsx mdx */\n\nexport const rightToc = [{\n  value: '环境',\n  id: '环境',\n  children: []\n}, {\n  value: '介绍',\n  id: '介绍',\n  children: []\n}, {\n  value: '首先创建两个nginx应用',\n  id: '首先创建两个nginx应用',\n  children: []\n}, {\n  value: '部署一个正常的ingress',\n  id: '部署一个正常的ingress',\n  children: []\n}, {\n  value: '基于权重转发流量',\n  id: '基于权重转发流量',\n  children: []\n}, {\n  value: '基于请求头转发流量',\n  id: '基于请求头转发流量',\n  children: []\n}, {\n  value: '基于请求头和请求头的值转发流量',\n  id: '基于请求头和请求头的值转发流量',\n  children: []\n}, {\n  value: '基于cookie转发流量',\n  id: '基于cookie转发流量',\n  children: []\n}, {\n  value: '总结',\n  id: '总结',\n  children: []\n}];\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  rightToc\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"k8s-1186版本基于-ingress-nginx-实现金丝雀发布（灰度发布）\"\n    }}>{`K8s 1.18.6版本基于 ingress-nginx 实现金丝雀发布（灰度发布）`}</h1>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`作者`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`谢泽钦`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`团队`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Filed&&Suppoort`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`编写时间`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`2020/12/11`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`类型`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`ingress相关解决方案`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <hr></hr>\n    <h2 {...{\n      \"id\": \"环境\"\n    }}>{`环境`}</h2>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`软件`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`版本`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`kubernetes`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`v1.18.6`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`nginx-ingress-controller`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`0.32.0`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Rancher`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`v2.4.5`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`本次实验基于 Rancher-v2.4.5 部署了1.18.6版本的k8s集群，nginx-ingress 版本为0.32.0，理论上 ingress-nginx >= 0.21.0都是可以的。`}</p>\n    <p>{`以下所有的实验，都可以直接在rancher UI上直接配置。`}</p>\n    <h2 {...{\n      \"id\": \"介绍\"\n    }}>{`介绍`}</h2>\n    <p>{`金丝雀发布：又叫灰度发布，控制产品从A版本平滑的过度到B版本`}</p>\n    <p>{`ingress-nginx：k8s ingress工具，支持金丝雀发布，可以实现基于权重、请求头、请求头的值、cookie转发流量。`}</p>\n    <p>{`rancher：k8s集群管理工具，使用UI简化k8s相关操作`}</p>\n    <p>{`ingress-nginx canary官方说明：`}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/kubernetes/ingress-nginx/blob/master/docs/user-guide/nginx-configuration/annotations.md#canary\"\n      }}>{`https://github.com/kubernetes/ingress-nginx/blob/master/docs/user-guide/nginx-configuration/annotations.md#canary`}</a></p>\n    <h2 {...{\n      \"id\": \"首先创建两个nginx应用\"\n    }}>{`首先创建两个nginx应用`}</h2>\n    <ol>\n      <li parentName=\"ol\">{`部署两个deployment的http应用`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: appv1\n  labels:\n    app: v1\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: v1\n  template:\n    metadata:\n      labels:\n        app: v1\n    spec:\n      containers:\n      - name: nginx\n        image: zerchin/canary:v1\n        ports:\n        - containerPort: 80\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: appv2\n  labels:\n    app: v2\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: v2\n  template:\n    metadata:\n      labels:\n        app: v2\n    spec:\n      containers:\n      - name: nginx\n        image: zerchin/canary:v2\n        ports:\n        - containerPort: 80\n`}</code></pre>\n    <p>{`kubectl查看pod`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-powershell\"\n      }}>{`# kubectl get pod -o wide |grep app\nappv1-77655949f8-hx6nm   1/1     Running   0          44m   10.60.0.91   xie-node001   <none>           <none>\nappv2-7b8659cd88-dgd5c   1/1     Running   0          44m   10.60.0.92   xie-node001   <none>           <none>\n`}</code></pre>\n    <p>{`这两个应用输出以下内容`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-powershell\"\n      }}>{`# curl 10.60.0.91\nv1\n# curl 10.60.0.92\ncanary-v2\n`}</code></pre>\n    <ol {...{\n      \"start\": 2\n    }}>\n      <li parentName=\"ol\">{`分别为应用创建对应的service`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Service\nmetadata:\n  name: appv1\nspec:\n  selector:\n    app: v1\n  ports:\n    - protocol: TCP\n      port: 80\n      targetPort: 80\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: appv2\nspec:\n  selector:\n    app: v2\n  ports:\n    - protocol: TCP\n      port: 80\n      targetPort: 80\n`}</code></pre>\n    <p>{`kubectl查看service`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`# kubectl get svc |grep app\nappv1         ClusterIP   10.50.42.17    <none>        80/TCP    26m\nappv2         ClusterIP   10.50.42.131   <none>        80/TCP    26m\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"部署一个正常的ingress\"\n    }}>{`部署一个正常的ingress`}</h2>\n    <p>{`现在这个ingress能正常的将访问路由到appv1上`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: extensions/v1beta1\nkind: Ingress\nmetadata:\n  name: app\n  namespace: default\nspec:\n  rules:\n  - host: nginx.zerchin.xyz\n    http:\n      paths:\n      - backend:\n          serviceName: appv1\n          servicePort: 80\n        path: /\n`}</code></pre>\n    <p>{`kubectl查看ingress`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-powershell\"\n      }}>{`# kubectl get ingress\nNAME         CLASS    HOSTS               ADDRESS                     PORTS   AGE\napp          <none>   nginx.zerchin.xyz   172.16.0.195,172.16.0.196   80      11m\n`}</code></pre>\n    <p>{`访问nginx.zerchin.xyz`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`# curl nginx.zerchin.xyz\nv1\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"基于权重转发流量\"\n    }}>{`基于权重转发流量`}</h2>\n    <p><inlineCode parentName=\"p\">{`nginx.ingress.kubernetes.io/canary-weight`}</inlineCode>{`：随机整数请求的整数百分比（0-100），应将其路由到canary Ingress中指定的服务。权重0表示此Canary规则不会在Canary入口中将任何请求发送到服务。权重为100表示所有请求都将发送到Ingress中指定的替代服务。`}</p>\n    <p>{`新建一个ingress，配置如下`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: extensions/v1beta1\nkind: Ingress\nmetadata:\n  annotations:\n    kubernetes.io/ingress.class: nginx\n    nginx.ingress.kubernetes.io/canary: \"true\"\n    nginx.ingress.kubernetes.io/canary-weight: \"30\"\n  name: app-canary\n  namespace: default\nspec:\n  rules:\n  - host: nginx.zerchin.xyz\n    http:\n      paths:\n      - backend:\n          serviceName: appv2\n          servicePort: 80\n        path: /\n`}</code></pre>\n    <p>{`kubectl查看ingress`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-powershell\"\n      }}>{`# kubectl get ingress\nNAME         CLASS    HOSTS               ADDRESS                     PORTS   AGE\napp          <none>   nginx.zerchin.xyz   172.16.0.195,172.16.0.196   80      11m\napp-canary   <none>   nginx.zerchin.xyz   172.16.0.195,172.16.0.196   80      7m13s\n`}</code></pre>\n    <p>{`这时候再访问nginx.zerchin.xyz，会发现其中30%的流量会路由到v2版本上`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`# for i in \\`seq 1 10\\`;do curl nginx.zerchin.xyz;done\ncanary-v2\ncanary-v2\nv1\nv1\ncanary-v2\nv1\nv1\nv1\nv1\nv1\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"基于请求头转发流量\"\n    }}>{`基于请求头转发流量`}</h2>\n    <p><inlineCode parentName=\"p\">{`nginx.ingress.kubernetes.io/canary-by-header`}</inlineCode>{`：用于通知Ingress将请求路由到Canary Ingress中指定的服务的标头。当请求标头设置`}<inlineCode parentName=\"p\">{`always`}</inlineCode>{`为时，它将被路由到Canary。当标头设置`}<inlineCode parentName=\"p\">{`never`}</inlineCode>{`为时，它将永远不会路由到金丝雀。对于任何其他值，标头将被忽略，并且按优先级将请求与其他金丝雀规则进行比较。`}</p>\n    <p>{`修改app-canary的ingress配置，修改annotation，如下：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`  annotations:\n    kubernetes.io/ingress.class: nginx\n    nginx.ingress.kubernetes.io/canary: \"true\"\n    nginx.ingress.kubernetes.io/canary-by-header: \"canary\"\n`}</code></pre>\n    <p>{`测试结果`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-powershell\"\n      }}>{`# curl nginx.zerchin.xyz \nv1\n# curl -H \"canary:always\" nginx.zerchin.xyz \ncanary-v2\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"基于请求头和请求头的值转发流量\"\n    }}>{`基于请求头和请求头的值转发流量`}</h2>\n    <p><inlineCode parentName=\"p\">{`nginx.ingress.kubernetes.io/canary-by-header-value`}</inlineCode>{`：匹配的报头值，用于通知Ingress将请求路由到Canary Ingress中指定的服务。当请求标头设置为此值时，它将被路由到Canary。对于任何其他标头值，标头将被忽略，并按优先级将请求与其他金丝雀规则进行比较。此注释必须与`}<inlineCode parentName=\"p\">{`nginx.ingress.kubernetes.io/canary-by-header`}</inlineCode>{`一起使用。`}</p>\n    <p>{`修改app-canary的ingress配置，修改annotation，如下：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`  annotations:\n    kubernetes.io/ingress.class: nginx\n    nginx.ingress.kubernetes.io/canary: \"true\"\n    nginx.ingress.kubernetes.io/canary-by-header: \"canary\"\n    nginx.ingress.kubernetes.io/canary-by-header-value: \"haha\"\n`}</code></pre>\n    <p>{`测试结果`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-powershell\"\n      }}>{`# curl nginx.zerchin.xyz\nv1\n# curl -H \"canary:haha\" nginx.zerchin.xyz\ncanary-v2\n# curl -H \"canary:always\" nginx.zerchin.xyz\nv1\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"基于cookie转发流量\"\n    }}>{`基于cookie转发流量`}</h2>\n    <p><inlineCode parentName=\"p\">{`nginx.ingress.kubernetes.io/canary-by-cookie`}</inlineCode>{`：用于通知Ingress将请求路由到Canary Ingress中指定的服务的cookie。当cookie值设置`}<inlineCode parentName=\"p\">{`always`}</inlineCode>{`为时，它将被路由到canary。当cookie设置`}<inlineCode parentName=\"p\">{`never`}</inlineCode>{`为时，它将永远不会路由到Canary。对于任何其他值，将忽略cookie，并按优先级将请求与其他canary规则进行比较。`}</p>\n    <p>{`修改app-canary的ingress配置，修改annotation，如下：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`  annotations:\n    kubernetes.io/ingress.class: nginx\n    nginx.ingress.kubernetes.io/canary: \"true\"\n    nginx.ingress.kubernetes.io/canary-by-cookie: \"test\"\n`}</code></pre>\n    <p>{`测试结果`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-powershell\"\n      }}>{`# curl nginx.zerchin.xyz\nv1\n# curl -b \"test=never\" nginx.zerchin.xyz\nv1\n# curl -b \"test=always\" nginx.zerchin.xyz\ncanary-v2\n# curl -b \"test=1\" nginx.zerchin.xyz\nv1\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"总结\"\n    }}>{`总结`}</h2>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`金丝雀发布规则优先级：`}<inlineCode parentName=\"p\">{`canary-by-header`}</inlineCode>{` -> `}<inlineCode parentName=\"p\">{`canary-by-cookie `}</inlineCode>{`-> `}<inlineCode parentName=\"p\">{`canary-weight`}</inlineCode></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`目前，每个ingress规则最多可以应用一个canary ingress`}</p>\n      </li>\n    </ol>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\n  "]}]}