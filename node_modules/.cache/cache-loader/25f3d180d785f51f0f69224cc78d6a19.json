{"remainingRequest":"/Users/zhen/Documents/doc-zhen/kuihua-ebook-new/node_modules/babel-loader/lib/index.js??ref--7-1!/Users/zhen/Documents/doc-zhen/kuihua-ebook-new/node_modules/@docusaurus/mdx-loader/src/index.js??ref--7-2!/Users/zhen/Documents/doc-zhen/kuihua-ebook-new/node_modules/@docusaurus/plugin-content-docs/lib/markdown/index.js??ref--7-3!/Users/zhen/Documents/doc-zhen/kuihua-ebook-new/docs/rancher2/cluster-admin/replace-ca/_index.md","dependencies":[{"path":"/Users/zhen/Documents/doc-zhen/kuihua-ebook-new/docs/rancher2/cluster-admin/replace-ca/_index.md","mtime":1609137490754},{"path":"/Users/zhen/Documents/doc-zhen/kuihua-ebook-new/.docusaurus/docusaurus-plugin-content-docs/site-docs-rancher-2-cluster-admin-replace-ca-index-md-fca.json","mtime":1609140319373},{"path":"/Users/zhen/Documents/doc-zhen/kuihua-ebook-new/node_modules/cache-loader/dist/cjs.js","mtime":1609137482435},{"path":"/Users/zhen/Documents/doc-zhen/kuihua-ebook-new/node_modules/babel-loader/lib/index.js","mtime":1609137488105},{"path":"/Users/zhen/Documents/doc-zhen/kuihua-ebook-new/node_modules/@docusaurus/mdx-loader/src/index.js","mtime":1609137487644},{"path":"/Users/zhen/Documents/doc-zhen/kuihua-ebook-new/node_modules/@docusaurus/plugin-content-docs/lib/markdown/index.js","mtime":1609137487714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9leHRlbmRzIGZyb20iL1VzZXJzL3poZW4vRG9jdW1lbnRzL2RvYy16aGVuL2t1aWh1YS1lYm9vay1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMiO2ltcG9ydCBSZWFjdCBmcm9tJ3JlYWN0JztpbXBvcnR7bWR4fWZyb20nQG1keC1qcy9yZWFjdCc7ZXhwb3J0IGNvbnN0IGZyb250TWF0dGVyPXt0aXRsZTonSW1wb3J0IOmbhue+pOabtOaWsCBDQSDor4HkuablkI4gUmFuY2hlciDnq6/miYDpnIDmk43kvZzphY3nva4nLGRlc2NyaXB0aW9uOm51bGwsa2V5d29yZHM6WydyYW5jaGVyIDIuMOS4reaWh+aWh+ahoycsJ3JhbmNoZXIgMi54IOS4reaWh+aWh+ahoycsJ3JhbmNoZXLkuK3mlocnLCdyYW5jaGVyIDIuMOS4reaWhycsJ3JhbmNoZXIyJywncmFuY2hlcuaVmeeoiycsJ3JhbmNoZXLkuK3lm70nLCdyYW5jaGVyIDIuMCcsJ3JhbmNoZXIyLjAg5Lit5paH5pWZ56iLJywn6ZuG576k566h55CG5ZGY5oyH5Y2XJywn6ZuG576k6K6/6Zeu5o6n5Yi2JywnSW1wb3J06ZuG576k5pu05pawY2Hor4HkuablkI5SYW5jaGVy56uv5omA6ZyA5pON5L2c6YWN572uJ119O2V4cG9ydCBjb25zdCBtZXRhZGF0YT17ImlkIjoicmFuY2hlcjIvY2x1c3Rlci1hZG1pbi9yZXBsYWNlLWNhL19pbmRleCIsInRpdGxlIjoiSW1wb3J0IOmbhue+pOabtOaWsCBDQSDor4HkuablkI4gUmFuY2hlciDnq6/miYDpnIDmk43kvZzphY3nva4iLCJkZXNjcmlwdGlvbiI6IiMjIDEuIFJhbmNoZXIg55u45YWz5aSH5Lu95pON5L2cIiwic291cmNlIjoiQHNpdGUvZG9jcy9yYW5jaGVyMi9jbHVzdGVyLWFkbWluL3JlcGxhY2UtY2EvX2luZGV4Lm1kIiwicGVybWFsaW5rIjoiL2RvY3MvcmFuY2hlcjIvY2x1c3Rlci1hZG1pbi9yZXBsYWNlLWNhL19pbmRleCIsImVkaXRVcmwiOiJodHRwczovL2dpdGh1Yi5jb20vY25yYW5jaGVyL2RvY3MtcmFuY2hlcjIvZWRpdC9tYXN0ZXIvZG9jcy9yYW5jaGVyMi9jbHVzdGVyLWFkbWluL3JlcGxhY2UtY2EvX2luZGV4Lm1kIiwibGFzdFVwZGF0ZWRCeSI6IkF1dGhvciIsImxhc3RVcGRhdGVkQXQiOjE1Mzk1MDIwNTV9Oy8qIEBqc3ggbWR4ICovZXhwb3J0IGNvbnN0IHJpZ2h0VG9jPVt7dmFsdWU6JzEuIFJhbmNoZXIg55u45YWz5aSH5Lu95pON5L2cJyxpZDonMS1yYW5jaGVyLeebuOWFs+Wkh+S7veaTjeS9nCcsY2hpbGRyZW46W3t2YWx1ZTonMS4xLiDljZXlrrnlmajpg6jnvbLlpIfku70nLGlkOicxMS3ljZXlrrnlmajpg6jnvbLlpIfku70nLGNoaWxkcmVuOltdfSx7dmFsdWU6JzEuMi4gSEEg6YOo572y5aSH5Lu9JyxpZDonMTItaGEt6YOo572y5aSH5Lu9JyxjaGlsZHJlbjpbXX1dfSx7dmFsdWU6JzIuIOaTjeS9nOatpemqpCcsaWQ6JzIt5pON5L2c5q2l6aqkJyxjaGlsZHJlbjpbe3ZhbHVlOicyLjEuIOWIoOmZpOS4muWKoembhue+pDxjb2RlPmNhdHRsZS1zeXN0ZW08L2NvZGU+5ZG95ZCN56m66Ze05Lit55qEPGNvZGU+Y2F0dGxlLXRva2VuLXh4eDwvY29kZT4nLGlkOicyMS3liKDpmaTkuJrliqHpm4bnvqRjYXR0bGUtc3lzdGVt5ZG95ZCN56m66Ze05Lit55qEY2F0dGxlLXRva2VuLXh4eCcsY2hpbGRyZW46W119LHt2YWx1ZTonMi4yLiDph43lu7ogQWdlbnQgUG9kJyxpZDonMjIt6YeN5bu6LWFnZW50LXBvZCcsY2hpbGRyZW46W119LHt2YWx1ZTonMi4zLiDojrflj5Y8Y29kZT50b2tlbjwvY29kZT4nLGlkOicyMy3ojrflj5Z0b2tlbicsY2hpbGRyZW46W119LHt2YWx1ZTonMi40LiDojrflj5bmlrDnmoQgQ0Eg6K+B5LmmJyxpZDonMjQt6I635Y+W5paw55qELWNhLeivgeS5picsY2hpbGRyZW46W119LHt2YWx1ZTonMi41LiDlnKggbG9jYWwg6ZuG576k5Lit5qOA5p+l5Lia5Yqh6ZuG576k55qEIGNsdXN0ZXJzIGNyZCDotYTmupDmmK/lkKbmnInmm7TmlrAnLGlkOicyNS3lnKgtbG9jYWwt6ZuG576k5Lit5qOA5p+l5Lia5Yqh6ZuG576k55qELWNsdXN0ZXJzLWNyZC3otYTmupDmmK/lkKbmnInmm7TmlrAnLGNoaWxkcmVuOltdfV19LHt2YWx1ZTonMy4g5bey55+l6Zeu6aKYJyxpZDonMy3lt7Lnn6Xpl67popgnLGNoaWxkcmVuOltdfV07Y29uc3QgbWFrZVNob3J0Y29kZT1uYW1lPT5mdW5jdGlvbiBNRFhEZWZhdWx0U2hvcnRjb2RlKHByb3BzKXtjb25zb2xlLndhcm4oIkNvbXBvbmVudCAiK25hbWUrIiB3YXMgbm90IGltcG9ydGVkLCBleHBvcnRlZCwgb3IgcHJvdmlkZWQgYnkgTURYUHJvdmlkZXIgYXMgZ2xvYmFsIHNjb3BlIik7cmV0dXJuIG1keCgiZGl2Iixwcm9wcyk7fTtjb25zdCBsYXlvdXRQcm9wcz17cmlnaHRUb2N9O2NvbnN0IE1EWExheW91dD0id3JhcHBlciI7ZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTURYQ29udGVudCh7Y29tcG9uZW50cywuLi5wcm9wc30pe3JldHVybiBtZHgoTURYTGF5b3V0LF9leHRlbmRzKHt9LGxheW91dFByb3BzLHByb3BzLHtjb21wb25lbnRzOmNvbXBvbmVudHMsbWR4VHlwZToiTURYTGF5b3V0In0pLG1keCgiaDIiLHsiaWQiOiIxLXJhbmNoZXIt55u45YWz5aSH5Lu95pON5L2cIn0sYDEuIFJhbmNoZXIg55u45YWz5aSH5Lu95pON5L2cYCksbWR4KCJoMyIseyJpZCI6IjExLeWNleWuueWZqOmDqOe9suWkh+S7vSJ9LGAxLjEuIOWNleWuueWZqOmDqOe9suWkh+S7vWApLG1keCgicCIsbnVsbCxg5aaC5p6c5ZyoYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGRvY2tlciBydW5gKSxg6YOo572yIFJhbmNoZXIg5pe277yM5pyJ6YCa6L+HYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYC12YCksYOaKiuWuueWZqOS4rWAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGAvdmFyL2xpYi9yYW5jaGVyYCksYOebruW9leaYoOWwhOWIsOS4u+acuuS4iu+8jOmCo+S5iOatpOatpemqpOWPr+S7pei3s+i/h++8m2ApLG1keCgicCIsbnVsbCxg5aaC5p6c5rKh5pyJ5pig5bCE55uu5b2V77yM6YKj5LmI6ZyA6KaB5omn6KGM5Lul5LiL5q2l6aqk6L+b6KGM5aSH5Lu977yaYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1iYXNoIn0pLGBSQU5DSEVSX0NPTlRBSU5FUl9JRD0KZG9ja2VyIGV4ZWMgLXRpIFwke1JBTkNIRVJfQ09OVEFJTkVSX0lEfSB0YXIgemN2ZiAvdG1wL3JhbmNoZXItZGF0YS1iYWNrdXAtPFJBTkNIRVJfVkVSU0lPTj4tPERBVEU+LnRhci5neiAvdmFyL2xpYi9yYW5jaGVyCmRvY2tlciBjcCBcJHtSQU5DSEVSX0NPTlRBSU5FUl9JRH06L3RtcC9yYW5jaGVyLWRhdGEtYmFja3VwLTxSQU5DSEVSX1ZFUlNJT04+LTxEQVRFPi50YXIuZ3ogLgpgKSksbWR4KCJoMyIseyJpZCI6IjEyLWhhLemDqOe9suWkh+S7vSJ9LGAxLjIuIEhBIOmDqOe9suWkh+S7vWApLG1keCgicCIsbnVsbCxg5oyH5a6aIHJrZSDphY3nva7mlofku7bov5vooYwgbG9jYWwg6ZuG576k5aSH5Lu977yaYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1iYXNoIn0pLGAuL3JrZV9saW51eC1hbWQ2NCBldGNkIHNuYXBzaG90LXNhdmUgLS1uYW1lIFNOQVBTSE9ULTIwMTkwM3h4LmRiIC0tY29uZmlnIGNsdXN0ZXIueW1sCmApKSxtZHgoInAiLG51bGwsYFJLRSDkvJrojrflj5bmr4/kuKroioLngrkgZXRjZCDnmoTlv6vnhafvvIzlubbkv53lrZjliLDmr4/kuKroioLngrnnmoRgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgL29wdC9ya2UvZXRjZC1zbmFwc2hvdHNgKSxg55uu5b2V5LiL44CCYCksbWR4KCJoMiIseyJpZCI6IjIt5pON5L2c5q2l6aqkIn0sYDIuIOaTjeS9nOatpemqpGApLG1keCgicCIsbnVsbCxg5Y2H57qn5a6M5Lia5Yqh6ZuG576k55qE6K+B5Lmm5LmL5ZCO77yMUmFuY2hlciDkuK3pm4bnvqTkvJrmiqUgeDUwOSDplJnor6/vvIzpnIDopoHmiafooYzku6XkuIvmraXpqqTkv67lpI3jgIJgKSxtZHgoInAiLG51bGwsYOaWh+S7tuWHhuWkhzpgKSxtZHgoInVsIixudWxsLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYGt1YmVjb25maWdgKSxgOiDmm7TmlrDor4HkuablkI7nmoTpm4bnvqTov57mjqXphY3nva7mlofku7ZgKSksbWR4KCJoMyIseyJpZCI6IjIxLeWIoOmZpOS4muWKoembhue+pGNhdHRsZS1zeXN0ZW3lkb3lkI3nqbrpl7TkuK3nmoRjYXR0bGUtdG9rZW4teHh4In0sYDIuMS4g5Yig6Zmk5Lia5Yqh6ZuG576kYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJoMyJ9LGBjYXR0bGUtc3lzdGVtYCksYOWRveWQjeepuumXtOS4reeahGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToiaDMifSxgY2F0dGxlLXRva2VuLXh4eGApKSxtZHgoInAiLG51bGwsYOmAmui/h+S7peS4i+WRveS7pOWIoOmZpGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBjYXR0bGUtdG9rZW4teHh4YCksYO+8jOWug+S8muWfuuS6juacgOaWsOeahCBDQSDor4Hkuabph43mlrDnlJ/miJBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgY2F0dGxlLXRva2VuLXh4eGApLGDjgIJgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLWJhc2gifSksYGt1YmVjb25maWc9eHh4LnlhbWwKY2F0dGxlX3Rva2VuPSQoIGt1YmVjdGwgLS1rdWJlY29uZmlnPVwke2t1YmVjb25maWd9IC1uIGNhdHRsZS1zeXN0ZW0gZ2V0IHNlY3JldCB8IGdyZXAgJ2NhdHRsZS10b2tlbi0nIHwgYXdrICd7cHJpbnQgJDF9JyApCmt1YmVjdGwgLS1rdWJlY29uZmlnPVwke2t1YmVjb25maWd9IC1uIGNhdHRsZS1zeXN0ZW0gZGVsZXRlIHNlY3JldCBcJHtjYXR0bGVfdG9rZW59CmApKSxtZHgoImgzIix7ImlkIjoiMjIt6YeN5bu6LWFnZW50LXBvZCJ9LGAyLjIuIOmHjeW7uiBBZ2VudCBQb2RgKSxtZHgoInAiLG51bGwsYOWboOS4uiBBZ2VudCBQb2Qg57uR5a6a5LqGYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYFNBYCksYO+8jOiAjCBTQSDnu5HlrprkuoZgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgc2VjcmV0c2ApLGDvvIzmiYDku6XlvZPliKDpmaRgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgY2F0dGxlLXRva2VuLXh4eGApLGDlkI7pnIDph43lu7ogUG9k77yM5Lul5Yqg6L295paw55qEYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHNlY3JldHNgKSxg44CCYCksbWR4KCJwIixudWxsLGDmiafooYzku6XkuIvlkb3ku6Tmibnph4/liKDpmaQgQWdlbnQgUG9k77yaYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1iYXNoIn0pLGBrdWJlY29uZmlnPXh4eC55YW1sCmt1YmVjdGwgLS1rdWJlY29uZmlnPVwke2t1YmVjb25maWd9IC1uIGNhdHRsZS1zeXN0ZW0gZ2V0IHBvZCB8IGdyZXAgLXYgJ05BTUUnIHwgYXdrICd7cHJpbnQgJDF9JyB8IHhhcmdzIGt1YmVjdGwgLS1rdWJlY29uZmlnPVwke2t1YmVjb25maWd9IC1uIGNhdHRsZS1zeXN0ZW0gZGVsZXRlIHBvZApgKSksbWR4KCJoMyIseyJpZCI6IjIzLeiOt+WPlnRva2VuIn0sYDIuMy4g6I635Y+WYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJoMyJ9LGB0b2tlbmApKSxtZHgoInAiLG51bGwsYOmHjeaWsOeUn+aIkGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBjYXR0bGUtdG9rZW4teHh4YCksYOS5i+WQju+8jOWPluWAvGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGB0b2tlbmApLGDlubZgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgYmFzZTY0IC1kYCksYOino+WvhuWQjuWkh+eUqOOAgmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtYmFzaCJ9KSxga3ViZWNvbmZpZz14eHgueWFtbApjYXR0bGVfdG9rZW49JCgga3ViZWN0bCAtLWt1YmVjb25maWc9XCR7a3ViZWNvbmZpZ30gLW4gY2F0dGxlLXN5c3RlbSBnZXQgc2VjcmV0IHwgZ3JlcCAnY2F0dGxlLXRva2VuLScgfCBhd2sgJ3twcmludCAkMX0nICkKa3ViZWN0bCAtLWt1YmVjb25maWc9XCR7a3ViZWNvbmZpZ30gLW4gY2F0dGxlLXN5c3RlbSBnZXQgc2VjcmV0IFwke2NhdHRsZV90b2tlbn0gLW8ganNvbnBhdGg9ey5kYXRhLnRva2VufSB8IGJhc2U2NCAtZApgKSksbWR4KCJoMyIseyJpZCI6IjI0LeiOt+WPluaWsOeahC1jYS3or4HkuaYifSxgMi40LiDojrflj5bmlrDnmoQgQ0Eg6K+B5LmmYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1iYXNoIn0pLGBrdWJlY29uZmlnPXh4eC55YW1sCmNhdHRsZV90b2tlbj0kKCBrdWJlY3RsIC0ta3ViZWNvbmZpZz1cJHtrdWJlY29uZmlnfSAtbiBjYXR0bGUtc3lzdGVtIGdldCBzZWNyZXQgfCBncmVwICdjYXR0bGUtdG9rZW4tJyB8IGF3ayAne3ByaW50ICQxfScgKQprdWJlY3RsIC0ta3ViZWNvbmZpZz1cJHtrdWJlY29uZmlnfSAtbiBjYXR0bGUtc3lzdGVtIGdldCBzZWNyZXQgXCR7Y2F0dGxlX3Rva2VufSAtbyBqc29ucGF0aD17LmRhdGEuJ2NhXFwuY3J0J30KYCkpLG1keCgiaDMiLHsiaWQiOiIyNS3lnKgtbG9jYWwt6ZuG576k5Lit5qOA5p+l5Lia5Yqh6ZuG576k55qELWNsdXN0ZXJzLWNyZC3otYTmupDmmK/lkKbmnInmm7TmlrAifSxgMi41LiDlnKggbG9jYWwg6ZuG576k5Lit5qOA5p+l5Lia5Yqh6ZuG576k55qEIGNsdXN0ZXJzIGNyZCDotYTmupDmmK/lkKbmnInmm7TmlrBgKSxtZHgoInAiLG51bGwsYOWcqOmHjeW7uiBBZ2VudCBQb2Qg5ZCO77yMY2x1c3RlciBhZ2VudCDov5DooYzotbfmnaXlkI7kvJroh6rliqjojrflj5bmlrBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgY2F0dGxlLXRva2VuLXh4eGApLGDkuK3nmoRgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgY2FgKSxg5ZKMYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHRva2VuYCksYOW5tuS4iuaKpee7mSByYW5jaGVy77yM5bm25L+d5a2Y5ZyoIGNsdXN0ZXJzIGNyZCDotYTmupDkuK3jgIJgKSxtZHgoInAiLG51bGwsYOWcqCBsb2NhbCDpm4bnvqTkuK3miafooYzku6XkuIvlkb3ku6Tmn6XnnIvlr7nlupTpm4bnvqTnmoQgQ1JEIOmFjee9riBZQU1MIOaWh+S7tuS4rWAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBzZXJ2aWNlQWNjb3VudFRva2VuYCksYOWSjGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBjYUNlcnRgKSxg5piv5ZCm5pyJ5pu05paw44CCYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1iYXNoIn0pLGBsb2NhbF9rdWJlY29uZmlnPXh4eC55YW1sCkNsdXN0ZXJfSUQ9ICAgICAj5rWP6KeI5Zmo5Zyw5Z2A5qCP5p+l55yL6ZuG576kSUQKa3ViZWN0bCAtLWt1YmVjb25maWc9XCR7bG9jYWxfa3ViZWNvbmZpZ30gZ2V0IGNsdXN0ZXJzIFwke0NsdXN0ZXJfSUR9IC1vIHlhbWwKYCkpLG1keCgicCIsbnVsbCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHNlcnZpY2VBY2NvdW50VG9rZW5gKSxg5a+55bqU5LiK6Z2i5q2l6aqk6I635Y+W55qEYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHRva2VuYCksYO+8jGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBjYUNlcnRgKSxg5a+55bqUYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYENBYCksYOivgeS5pu+8jOWPr+S7pemAmui/h+WvueavlOW3peWFt+WvueavlOS4gOS4i+OAgmApLG1keCgiYmxvY2txdW90ZSIsbnVsbCxtZHgoInAiLHtwYXJlbnROYW1lOiJibG9ja3F1b3RlIn0sYOW3suefpemXrumimO+8muWcqOebuOWvueiAgeeahCByYW5jaGVyIOeJiOacrOS4re+8jOmdniBya2Ug6ZuG576k5Y+v6IO95Ye6546wYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGNhYCksYOaIluiAhWAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGB0b2tlbmApLGDmnKroh6rliqjkuIrmiqXnmoTpl67popjvvIzlpoLmnpzlh7rnjrDotYTmupDmnKrmm7TmlrDpnIDmjInnhafku6XkuIvmraXpqqTmiYvliqjkv67mlLnjgIJgKSksbWR4KCJ1bCIsbnVsbCxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxg5aSH5Lu9IGNyZCBjbHVzdGVycyDotYTmupBgKSksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1iYXNoIn0pLGBsb2NhbF9rdWJlY29uZmlnPXh4eC55YW1sCkNsdXN0ZXJfSUQ9ICAgICAj5rWP6KeI5Zmo5Zyw5Z2A5qCP5p+l55yL6ZuG576kSUQKa3ViZWN0bCAtLWt1YmVjb25maWc9XCR7bG9jYWxfa3ViZWNvbmZpZ30gZ2V0IGNsdXN0ZXJzIFwke0NsdXN0ZXJfSUR9IC1vIHlhbWwgPiBcJHtDbHVzdGVyX0lEfS55YW1sCmApKSxtZHgoInVsIixudWxsLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LG1keCgicCIse3BhcmVudE5hbWU6ImxpIn0sYOS/ruaUuSBjcmQgY2x1c3RlcnMg6LWE5rqQYCksbWR4KCJ1bCIse3BhcmVudE5hbWU6ImxpIn0sbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sbWR4KCJwIix7cGFyZW50TmFtZToibGkifSxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHNlcnZpY2VBY2NvdW50VG9rZW5gKSxg5a2X5q615Y+C5pWw77ya5L2/55So5LiK6Z2i5q2l6aqk5Lit6I635Y+W55qEYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHRva2VuYCksYOabv+aNou+8m2ApKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxtZHgoInAiLHtwYXJlbnROYW1lOiJsaSJ9LG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgY2FDZXJ0YCksYOWtl+auteWPguaVsDog5L2/55So5LiK6Z2i5q2l6aqk6I635Y+W55qE5pawIENBIOivgeS5puabv+aNou+8m2ApKSkpKSxtZHgoImgyIix7ImlkIjoiMy3lt7Lnn6Xpl67popgifSxgMy4g5bey55+l6Zeu6aKYYCksbWR4KCJwIixudWxsLGDkuJrliqHpm4bnvqTljYfnuqfor4HkuablubbmjInnhafku6XkuIrmraXpqqTmk43kvZzlkI7vvIzlj6/ku6XmraPluLjov5vlhaUgUmFuY2hlciBVSe+8jOS5n+WPr+S7peato+W4uOeahOmDqOe9suW6lOeUqO+8jOS9huaYr+aXoOazleafpeeci+aXpeW/l+WSjOaJp+ihjCB3ZWIgc2hlbGwg57uI56uv44CCYCksbWR4KCJwIixudWxsLGDov5nmmK/lnKggUmFuY2hlciAyLjEueCDniYjmnKzkuK3lt7Lnn6Xpl67popjvvIzlm6DkuLrlnKjlhoXlrZjkuK3kv53lrZjnnYDkuIDku70gQ1JEIOi1hOa6kOWJr+acrO+8jFJhbmNoZXIg6L+Q6KGM5pe25L2/55So55qE5YaF5a2Y5Lit55qEIENSRCDotYTmupDjgILlnKjmm7TmlrDkuoYgQ1JEIOi1hOa6kOWQju+8jFJhbmNoZXIg5rKh5pyJ5oSf55+l5YiwIENSRCDotYTmupDlj5jljJbvvIzkvJrkuIDnm7Tkvb/nlKjlhoXlrZjkuK3nmoQgQ1JEIOWJr+acrOOAguaXpyBDUkQg5Ymv5pys5L+d5a2Y552A5pen55qEIENBIOivgeS5puWSjCB0b2tlbu+8jOS7juiAjOWvvOiHtCBBZ2VudCDml6Dms5Xov57mjqUgSzhTIOmbhue+pOOAgmApLG1keCgicCIsbnVsbCxg55uu5YmN5pyJ5pWI55qE5pa55rOV5Y+q5pyJ6YeN5ZCvIFJhbmNoZXIgc2VydmVyIHBvZOOAgmApKTt9O01EWENvbnRlbnQuaXNNRFhDb21wb25lbnQ9dHJ1ZTs="},{"version":3,"sources":["/Users/zhen/Documents/doc-zhen/kuihua-ebook-new/docs/rancher2/cluster-admin/replace-ca/_index.md"],"names":["React","mdx","frontMatter","title","description","keywords","metadata","rightToc","value","id","children","makeShortcode","name","MDXDefaultShortcode","props","console","warn","layoutProps","MDXLayout","MDXContent","components","isMDXComponent"],"mappings":"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","sourcesContent":["\n  import React from 'react';\n  import { mdx } from '@mdx-js/react';\n\n  export const frontMatter = {\n\ttitle: 'Import 集群更新 CA 证书后 Rancher 端所需操作配置',\n\tdescription: null,\n\tkeywords: [\n\t\t'rancher 2.0中文文档',\n\t\t'rancher 2.x 中文文档',\n\t\t'rancher中文',\n\t\t'rancher 2.0中文',\n\t\t'rancher2',\n\t\t'rancher教程',\n\t\t'rancher中国',\n\t\t'rancher 2.0',\n\t\t'rancher2.0 中文教程',\n\t\t'集群管理员指南',\n\t\t'集群访问控制',\n\t\t'Import集群更新ca证书后Rancher端所需操作配置'\n\t]\n};\nexport const metadata = {\n  \"id\": \"rancher2/cluster-admin/replace-ca/_index\",\n  \"title\": \"Import 集群更新 CA 证书后 Rancher 端所需操作配置\",\n  \"description\": \"## 1. Rancher 相关备份操作\",\n  \"source\": \"@site/docs/rancher2/cluster-admin/replace-ca/_index.md\",\n  \"permalink\": \"/docs/rancher2/cluster-admin/replace-ca/_index\",\n  \"editUrl\": \"https://github.com/cnrancher/docs-rancher2/edit/master/docs/rancher2/cluster-admin/replace-ca/_index.md\",\n  \"lastUpdatedBy\": \"Author\",\n  \"lastUpdatedAt\": 1539502055\n};\n  /* @jsx mdx */\n\nexport const rightToc = [{\n  value: '1. Rancher 相关备份操作',\n  id: '1-rancher-相关备份操作',\n  children: [{\n    value: '1.1. 单容器部署备份',\n    id: '11-单容器部署备份',\n    children: []\n  }, {\n    value: '1.2. HA 部署备份',\n    id: '12-ha-部署备份',\n    children: []\n  }]\n}, {\n  value: '2. 操作步骤',\n  id: '2-操作步骤',\n  children: [{\n    value: '2.1. 删除业务集群<code>cattle-system</code>命名空间中的<code>cattle-token-xxx</code>',\n    id: '21-删除业务集群cattle-system命名空间中的cattle-token-xxx',\n    children: []\n  }, {\n    value: '2.2. 重建 Agent Pod',\n    id: '22-重建-agent-pod',\n    children: []\n  }, {\n    value: '2.3. 获取<code>token</code>',\n    id: '23-获取token',\n    children: []\n  }, {\n    value: '2.4. 获取新的 CA 证书',\n    id: '24-获取新的-ca-证书',\n    children: []\n  }, {\n    value: '2.5. 在 local 集群中检查业务集群的 clusters crd 资源是否有更新',\n    id: '25-在-local-集群中检查业务集群的-clusters-crd-资源是否有更新',\n    children: []\n  }]\n}, {\n  value: '3. 已知问题',\n  id: '3-已知问题',\n  children: []\n}];\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  rightToc\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h2 {...{\n      \"id\": \"1-rancher-相关备份操作\"\n    }}>{`1. Rancher 相关备份操作`}</h2>\n    <h3 {...{\n      \"id\": \"11-单容器部署备份\"\n    }}>{`1.1. 单容器部署备份`}</h3>\n    <p>{`如果在`}<inlineCode parentName=\"p\">{`docker run`}</inlineCode>{`部署 Rancher 时，有通过`}<inlineCode parentName=\"p\">{`-v`}</inlineCode>{`把容器中`}<inlineCode parentName=\"p\">{`/var/lib/rancher`}</inlineCode>{`目录映射到主机上，那么此步骤可以跳过；`}</p>\n    <p>{`如果没有映射目录，那么需要执行以下步骤进行备份：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`RANCHER_CONTAINER_ID=\ndocker exec -ti \\${RANCHER_CONTAINER_ID} tar zcvf /tmp/rancher-data-backup-<RANCHER_VERSION>-<DATE>.tar.gz /var/lib/rancher\ndocker cp \\${RANCHER_CONTAINER_ID}:/tmp/rancher-data-backup-<RANCHER_VERSION>-<DATE>.tar.gz .\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"12-ha-部署备份\"\n    }}>{`1.2. HA 部署备份`}</h3>\n    <p>{`指定 rke 配置文件进行 local 集群备份：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`./rke_linux-amd64 etcd snapshot-save --name SNAPSHOT-201903xx.db --config cluster.yml\n`}</code></pre>\n    <p>{`RKE 会获取每个节点 etcd 的快照，并保存到每个节点的`}<inlineCode parentName=\"p\">{`/opt/rke/etcd-snapshots`}</inlineCode>{`目录下。`}</p>\n    <h2 {...{\n      \"id\": \"2-操作步骤\"\n    }}>{`2. 操作步骤`}</h2>\n    <p>{`升级完业务集群的证书之后，Rancher 中集群会报 x509 错误，需要执行以下步骤修复。`}</p>\n    <p>{`文件准备:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`kubeconfig`}</inlineCode>{`: 更新证书后的集群连接配置文件`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"21-删除业务集群cattle-system命名空间中的cattle-token-xxx\"\n    }}>{`2.1. 删除业务集群`}<inlineCode parentName=\"h3\">{`cattle-system`}</inlineCode>{`命名空间中的`}<inlineCode parentName=\"h3\">{`cattle-token-xxx`}</inlineCode></h3>\n    <p>{`通过以下命令删除`}<inlineCode parentName=\"p\">{`cattle-token-xxx`}</inlineCode>{`，它会基于最新的 CA 证书重新生成`}<inlineCode parentName=\"p\">{`cattle-token-xxx`}</inlineCode>{`。`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`kubeconfig=xxx.yaml\ncattle_token=$( kubectl --kubeconfig=\\${kubeconfig} -n cattle-system get secret | grep 'cattle-token-' | awk '{print $1}' )\nkubectl --kubeconfig=\\${kubeconfig} -n cattle-system delete secret \\${cattle_token}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"22-重建-agent-pod\"\n    }}>{`2.2. 重建 Agent Pod`}</h3>\n    <p>{`因为 Agent Pod 绑定了`}<inlineCode parentName=\"p\">{`SA`}</inlineCode>{`，而 SA 绑定了`}<inlineCode parentName=\"p\">{`secrets`}</inlineCode>{`，所以当删除`}<inlineCode parentName=\"p\">{`cattle-token-xxx`}</inlineCode>{`后需重建 Pod，以加载新的`}<inlineCode parentName=\"p\">{`secrets`}</inlineCode>{`。`}</p>\n    <p>{`执行以下命令批量删除 Agent Pod：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`kubeconfig=xxx.yaml\nkubectl --kubeconfig=\\${kubeconfig} -n cattle-system get pod | grep -v 'NAME' | awk '{print $1}' | xargs kubectl --kubeconfig=\\${kubeconfig} -n cattle-system delete pod\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"23-获取token\"\n    }}>{`2.3. 获取`}<inlineCode parentName=\"h3\">{`token`}</inlineCode></h3>\n    <p>{`重新生成`}<inlineCode parentName=\"p\">{`cattle-token-xxx`}</inlineCode>{`之后，取值`}<inlineCode parentName=\"p\">{`token`}</inlineCode>{`并`}<inlineCode parentName=\"p\">{`base64 -d`}</inlineCode>{`解密后备用。`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`kubeconfig=xxx.yaml\ncattle_token=$( kubectl --kubeconfig=\\${kubeconfig} -n cattle-system get secret | grep 'cattle-token-' | awk '{print $1}' )\nkubectl --kubeconfig=\\${kubeconfig} -n cattle-system get secret \\${cattle_token} -o jsonpath={.data.token} | base64 -d\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"24-获取新的-ca-证书\"\n    }}>{`2.4. 获取新的 CA 证书`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`kubeconfig=xxx.yaml\ncattle_token=$( kubectl --kubeconfig=\\${kubeconfig} -n cattle-system get secret | grep 'cattle-token-' | awk '{print $1}' )\nkubectl --kubeconfig=\\${kubeconfig} -n cattle-system get secret \\${cattle_token} -o jsonpath={.data.'ca\\\\.crt'}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"25-在-local-集群中检查业务集群的-clusters-crd-资源是否有更新\"\n    }}>{`2.5. 在 local 集群中检查业务集群的 clusters crd 资源是否有更新`}</h3>\n    <p>{`在重建 Agent Pod 后，cluster agent 运行起来后会自动获取新`}<inlineCode parentName=\"p\">{`cattle-token-xxx`}</inlineCode>{`中的`}<inlineCode parentName=\"p\">{`ca`}</inlineCode>{`和`}<inlineCode parentName=\"p\">{`token`}</inlineCode>{`并上报给 rancher，并保存在 clusters crd 资源中。`}</p>\n    <p>{`在 local 集群中执行以下命令查看对应集群的 CRD 配置 YAML 文件中`}<inlineCode parentName=\"p\">{`serviceAccountToken`}</inlineCode>{`和`}<inlineCode parentName=\"p\">{`caCert`}</inlineCode>{`是否有更新。`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`local_kubeconfig=xxx.yaml\nCluster_ID=     #浏览器地址栏查看集群ID\nkubectl --kubeconfig=\\${local_kubeconfig} get clusters \\${Cluster_ID} -o yaml\n`}</code></pre>\n    <p><inlineCode parentName=\"p\">{`serviceAccountToken`}</inlineCode>{`对应上面步骤获取的`}<inlineCode parentName=\"p\">{`token`}</inlineCode>{`，`}<inlineCode parentName=\"p\">{`caCert`}</inlineCode>{`对应`}<inlineCode parentName=\"p\">{`CA`}</inlineCode>{`证书，可以通过对比工具对比一下。`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`已知问题：在相对老的 rancher 版本中，非 rke 集群可能出现`}<inlineCode parentName=\"p\">{`ca`}</inlineCode>{`或者`}<inlineCode parentName=\"p\">{`token`}</inlineCode>{`未自动上报的问题，如果出现资源未更新需按照以下步骤手动修改。`}</p>\n    </blockquote>\n    <ul>\n      <li parentName=\"ul\">{`备份 crd clusters 资源`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`local_kubeconfig=xxx.yaml\nCluster_ID=     #浏览器地址栏查看集群ID\nkubectl --kubeconfig=\\${local_kubeconfig} get clusters \\${Cluster_ID} -o yaml > \\${Cluster_ID}.yaml\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`修改 crd clusters 资源`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">\n            <p parentName=\"li\"><inlineCode parentName=\"p\">{`serviceAccountToken`}</inlineCode>{`字段参数：使用上面步骤中获取的`}<inlineCode parentName=\"p\">{`token`}</inlineCode>{`替换；`}</p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\"><inlineCode parentName=\"p\">{`caCert`}</inlineCode>{`字段参数: 使用上面步骤获取的新 CA 证书替换；`}</p>\n          </li>\n        </ul>\n      </li>\n    </ul>\n    <h2 {...{\n      \"id\": \"3-已知问题\"\n    }}>{`3. 已知问题`}</h2>\n    <p>{`业务集群升级证书并按照以上步骤操作后，可以正常进入 Rancher UI，也可以正常的部署应用，但是无法查看日志和执行 web shell 终端。`}</p>\n    <p>{`这是在 Rancher 2.1.x 版本中已知问题，因为在内存中保存着一份 CRD 资源副本，Rancher 运行时使用的内存中的 CRD 资源。在更新了 CRD 资源后，Rancher 没有感知到 CRD 资源变化，会一直使用内存中的 CRD 副本。旧 CRD 副本保存着旧的 CA 证书和 token，从而导致 Agent 无法连接 K8S 集群。`}</p>\n    <p>{`目前有效的方法只有重启 Rancher server pod。`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\n  "]}]}